<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plan Your Trip — RouteQuest</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background:#fff8f2}
      .sidebar{border-right:1px solid rgba(0,0,0,0.06);min-height:80vh}
      .destination-item{cursor:pointer;padding:12px;border-radius:8px}
      .destination-item:hover{background:#fff}
      .active-dest{background:linear-gradient(90deg,#fffbf5,#fff);box-shadow:0 6px 20px rgba(255,122,0,0.06)}
      .pill{display:inline-block;background:#eef6f1;color:#0b6b44;padding:6px 10px;border-radius:999px;margin-right:6px;margin-bottom:6px}
      .eat-pill{display:inline-block;background:#fff4e6;color:#9a4118;padding:5px 9px;border-radius:999px;margin-right:6px;margin-bottom:6px;border:1px solid rgba(0,0,0,0.04);font-size:0.9em}
  .attraction-inline{background:#ffffff;border:1px solid #f3f3f3;border-radius:8px;padding:12px;margin-bottom:14px;position:relative;z-index:50}
      .attraction-item{padding:10px;border-bottom:1px dashed #f0f0f0}
      .attraction-item:last-child{border-bottom:none}
      .attraction-search{max-width:420px}
      .section-title{font-weight:700;margin-top:6px}
      .map-placeholder{background:#e9f4f0;height:320px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#0b6b44}
    </style>
  </head>
  <body>

    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 style="font-weight:800">Mumbai — Plan Your Visit</h2>
        <a href="destinations.html" class="btn btn-outline-secondary">Back to Destinations</a>
      </div>

      <div class="row">
        <div class="col-lg-8 p-3">
          <div class="card shadow-sm p-4">
            <div class="d-flex gap-4">
              <div style="flex:1">
                <h3 id="destTitle">Mumbai</h3>
                <div class="mb-2">
                  <div class="text-muted small">Explore key attractions and quick facts below</div>
                </div>

                <!-- Inline attractions panel (searchable) -->
                <div id="attractionPanel" class="attraction-inline" style="display:none">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <div class="fw-semibold">All attractions in Mumbai</div>
                    <div class="d-flex align-items-center">
                      <input id="attractionSearch" class="form-control form-control-sm attraction-search me-2" placeholder="Search attractions..." />
                      <button id="closeAttractionPanel" class="btn btn-sm btn-outline-secondary">Close</button>
                    </div>
                  </div>
                  <div id="attractionListInline"></div>
                </div>
                <p id="destSignificance" class="text-muted">Mumbai is India's financial and entertainment capital. From colonial-era architecture and bustling bazaars to seaside promenades and cultural institutions, Mumbai offers a mix of history, modernity, and diverse cuisine.</p>

                <div class="mb-4">
                  <div class="section-title">Popular tourist attractions</div>
                  <div id="destAttractions" style="margin-top:12px"></div>
                </div>

                <!-- Opening hours for key attractions -->
                <!-- Opening Hours moved to a full-width section below -->

                 <div class="container py-3">
    <div class="mb-3">
      <div class="section-title">Must-try foods & where to try — Quick picks</div>
    </div>

    <!-- Opening Hours moved into the right panel below quick info -->

    <!-- South Mumbai (CST / Colaba) -->
    <div class="area-card">
      <div class="fw-semibold mb-2">CST / Colaba</div>
      <div>
        <span class="pill">Pav Bhaji — Sardar Pav Bhaji (CST)</span>
        <span class="pill">Cafe Classic — Cafe Mondegar / Leopold Cafe (Colaba)</span>
      </div>
    </div>

    <!-- Marine Drive / Hanging Gardens / Haji Ali -->
    <div class="area-card">
      <div class="fw-semibold mb-2">Marine Drive / Haji Ali</div>
      <div>
        <span class="pill">Kebabs & Irani — Kyani & Co. / Bademiya (nearby)</span>
        <span class="pill">Seafood Snacks — Britannia & Co. (ballard estate / nearby Irani)</span>
      </div>
    </div>

    <!-- Bandra / Bandra-Worli Sea Link / Juhu -->
    <div class="area-card">
      <div class="fw-semibold mb-2">Bandra / Juhu</div>
      <div>
        <span class="pill">Seafood — Mahesh Lunch Home (Bandra)</span>
        <span class="pill">Street Bites — Juhu Beach stalls (chaat & pav)</span>
      </div>
    </div>

    <!-- Sanjay Gandhi NP / Elephanta (simple single line) -->
    <div class="area-card">
      <div class="fw-semibold mb-2">North / Elephanta</div>
      <div>
        <span class="pill">Local Thali — eateries near Borivali station (for SGNP)</span>
        <span class="pill">Ferry Snacks — Colaba/Harbour seafood stalls (before/after Elephanta)</span>
      </div>
    </div>

  </div>

                <div class="mb-4">
                  <div class="section-title">Rules & regulations (visiting tips)</div>
                  <ul id="destRules">
                    <li>Respect dress codes at religious sites; remove shoes where required.</li>
                    <li>Follow photography rules in museums and some heritage sites.</li>
                    <li>Use licensed guides where applicable for protected monuments.</li>
                    <li>Do not litter; use designated areas for eating and waste disposal.</li>
                    <li>Check opening hours and book tickets for Elephanta Caves and museums in advance.</li>
                    <li>Be cautious during monsoon (June–Sept) due to heavy rains and occasional flooding.</li>
                  </ul>
                </div>

                <div class="d-flex gap-2">
                  <button id="addItinerary" class="btn btn-primary">Add all to Itinerary</button>
                  <a href="scripts/generate-mumbai-mst.html" target="_blank" class="btn btn-outline-secondary">View distance MST</a>
                </div>
              </div>

              <div style="width:320px">
                <div class="map-placeholder mb-3" id="mapPlaceholder">Map preview (use Google Maps API to enable)</div>
                <div>
                  <small class="text-muted">Quick info</small>
                  <div class="d-flex justify-content-between mt-2">
                    <div>
                      <div class="text-muted small">Best time</div>
                      <div id="destBestTime" style="font-weight:700">Oct–Mar</div>
                    </div>
                    <div>
                      <div class="text-muted small">Avg stay</div>
                      <div id="destAvgStay" style="font-weight:700">2–3 days</div>
                    </div>
                  </div>
                </div>
                
                <!-- Opening hours compact card (right column) -->
                <div class="card mt-3 p-3 shadow-sm" id="hoursCompact">
                  <div class="fw-semibold">Opening Hours</div>
                  <div class="text-muted small mb-2">Key attractions</div>
                  <div>
                    <div class="mb-2"><strong>Gateway of India</strong><div class="text-muted small">Open 24 hours</div></div>
                    <div class="mb-2"><strong>Elephanta Caves</strong><div class="text-muted small">9:00 AM – 5:00 PM (Closed Mon)</div></div>
                    <div class="mb-2"><strong>Sanjay Gandhi NP</strong><div class="text-muted small">7:30 AM – 5:30 PM</div></div>
                    <div class="mb-2"><strong>CSMVS Museum</strong><div class="text-muted small">10:15 AM – 6:00 PM (Closed Mon)</div></div>
                    <div class="mb-2"><strong>Other spots</strong><div class="text-muted small">Marine Drive, Juhu Beach — open all day</div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 p-3">
          <!-- Places to visit dropdown (populated from data/mumbai-attractions.json) -->
          <div class="mb-3">
            <div class="dropdown">
              <button class="btn btn-outline-primary dropdown-toggle w-100" type="button" id="placesDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false">
                Places to visit
              </button>
              <ul class="dropdown-menu" aria-labelledby="placesDropdownBtn" id="placesDropdownMenu" style="max-height:320px;overflow:auto"></ul>
            </div>
          </div>

          <div class="card shadow-sm p-3 mt-3">
            <h6>Visitor advice</h6>
            <ul>
              <li>Peak season is October–March; book accommodations early.</li>
              <li>Use public transport and ride-hailing apps for convenience.</li>
              <li>Respect local customs at religious places; queue patiently.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Simple client-side data loader: list destinations from our existing destinations page data.
      const destinations = [
        {id:'mumbai', title:'Mumbai', best:'Oct–Mar', avgStay:'2–3 days'},
        {id:'pune', title:'Pune', best:'Oct–Feb', avgStay:'1–2 days'},
        {id:'aurangabad', title:'Aurangabad', best:'Oct–Feb', avgStay:'1–2 days'},
        {id:'mahabaleshwar', title:'Mahabaleshwar', best:'Oct–May', avgStay:'1–3 days'},
        {id:'lonavla', title:'Lonavla', best:'Jun–Sep & Oct–Feb', avgStay:'1 day'},
        {id:'matheran', title:'Matheran', best:'Oct–May', avgStay:'1 day'},
        {id:'nashik', title:'Nashik', best:'Oct–Feb', avgStay:'1–2 days'},
        {id:'shirdi', title:'Shirdi', best:'Oct–Feb', avgStay:'1 day'},
        {id:'alibaug', title:'Alibaug', best:'Oct–Feb', avgStay:'1–2 days'},
        {id:'konkan', title:'Konkan Coast', best:'Oct–Mar', avgStay:'2–5 days'}
      ]

      const destList = document.getElementById('destList')
      const nearbyList = document.getElementById('nearbyList')
      const destAttractions = document.getElementById('destAttractions')
      const destTitle = document.getElementById('destTitle')
      const destSignificance = document.getElementById('destSignificance')
      const destBestTime = document.getElementById('destBestTime')
      const destAvgStay = document.getElementById('destAvgStay')

      function makeDestItem(d){
        const el = document.createElement('div')
        el.className = 'destination-item mb-2'
        el.textContent = d.title
        el.onclick = () => selectDestination(d.id)
        return el
      }

      destinations.forEach(d => destList.appendChild(makeDestItem(d)))

      function selectDestination(id){
        // simple mapping for now; in a full app we'd load the specific JSON file
        const d = destinations.find(x=>x.id===id)
        if(!d) return
        // update UI
        destTitle.textContent = d.title
        destBestTime.textContent = d.best
        destAvgStay.textContent = d.avgStay
        // simple significance blurb (editable)
        const significanceMap = {
          'mumbai': 'Mumbai is the financial capital of India, known for its historic architecture, film industry (Bollywood), and diverse neighbourhoods.',
          'pune': 'Pune is an educational and cultural center, with strong historical roots and a vibrant modern scene.',
          'aurangabad': 'Aurangabad is the gateway to the Ajanta and Ellora caves and has rich historical significance.',
          'mahabaleshwar': 'A scenic hill station famous for viewpoints, strawberry farms, and pleasant weather.',
          'lonavla': 'Popular hill station close to Mumbai, ideal for quick monsoon getaways and trekking.',
          'matheran': 'A vehicle-free hill station known for quiet trails and panoramic viewpoints.',
          'nashik': 'A religious and wine-tourism center, host of the Kumbh Mela and vineyards like Sula.',
          'shirdi': 'A major pilgrimage town dedicated to Sai Baba, attracting devotees year-round.',
          'alibaug': 'A coastal town with beaches and forts, popular for weekend trips from Mumbai.',
          'konkan': 'The Konkan coastline offers pristine beaches, seafood and tranquil coastal villages.'
        }
        destSignificance.textContent = significanceMap[id] || ''

        // eateries mapping (examples of popular nearby places to eat)
        const eateriesMap = {
          'cst': ['Britannia & Co. (Berry Pulav)', 'Cafe Mondegar (Colaba)'],
          'gateway': ['Bademiya (late-night kebabs)', 'Leopold Cafe'],
          'marine_drive': ['The Dome (InterContinental)', 'Sea Lounge (Taj)'],
          'elephanta': ['Island ferry snacks & small cafés (from Gateway)'],
          'sanjay_gandhi_np': ['Borivali local eateries & dhabas', 'Santosh Bhojanalay'],
          'hanging_gardens': ['Kala Ghoda cafés', 'Café by the promenade'],
          'juhu_beach': ['Prithvi Cafe', 'Sagar Ratna (Juhu)'],
          'siddhi_vinayak': ['Local prasadam & nearby vegetarian stalls', 'Vaishali (near Dadar)'],
          'haji_ali': ['Gajalee (seafood)', 'Mahalaxmi eateries & street-food carts'],
          'csmvs': ['Kala Ghoda cafes & bakeries', 'Theobroma (bakes)'],
          'bandra_worli_sea_link': ['Bastian (seafood ­– Bandra)', 'Candies (Bandra)'],
          'colaba_causeway': ['Leopold Cafe', 'Cafe Mondegar', 'Bademiya'],
          'dharavi': ['Local street-food stalls', 'Home-style eateries & chai shops']
        }

        // load attractions from data file if available
        fetch(`data/${id}-attractions.json`).then(r=>r.json()).then(js=>{
          destAttractions.innerHTML = ''
          // show a few top attractions as small blocks with nearby eateries
          js.spots.slice(0,8).forEach(s=>{
            const block = document.createElement('div')
            block.style.padding = '10px'
            block.style.marginBottom = '8px'
            block.style.borderBottom = '1px solid #f6f6f6'

            const title = document.createElement('div')
            title.style.fontWeight = 600
            title.textContent = s.name
            block.appendChild(title)

            const eatLabel = document.createElement('div')
            eatLabel.className = 'text-muted small'
            eatLabel.style.marginTop = '6px'
            eatLabel.textContent = 'Popular places to eat nearby:'
            block.appendChild(eatLabel)

            const eatWrap = document.createElement('div')
            eatWrap.style.marginTop = '6px'
            const eats = eateriesMap[s.id] || []
            if(eats.length){
              eats.forEach(eat => {
                const ep = document.createElement('span')
                ep.className = 'eat-pill'
                ep.textContent = eat
                eatWrap.appendChild(ep)
              })
            } else {
              const none = document.createElement('span')
              none.className = 'text-muted small'
              none.textContent = 'Local cafes and street food nearby.'
              eatWrap.appendChild(none)
            }
            block.appendChild(eatWrap)

            destAttractions.appendChild(block)
          })

          // populate the inline attractions panel with short blurbs and wire search
          const summaries = {
            'cst': 'Victorian Gothic railway station and UNESCO site, known for its architecture and historic central location.',
            'gateway': 'Iconic ceremonial arch built during the British Raj; gateway to the city and ferry point to Elephanta Caves.',
            'marine_drive': 'Scenic seaside promenade (Queen\'s Necklace) popular at sunset and for evening walks.',
            'elephanta': 'Island with ancient rock-cut cave temples dedicated to Lord Shiva; UNESCO World Heritage site.',
            'sanjay_gandhi_np': 'Large national park within the city with a mini-zoo, Kanheri caves and nature trails.',
            'hanging_gardens': 'Terraced gardens on Malabar Hill offering city and sea views; popular for sunset.',
            'juhu_beach': 'Famous beach known for street food, sunset views and celebrity homes nearby.',
            'siddhi_vinayak': 'Renowned Hindu temple dedicated to Lord Ganesha and an important pilgrimage site.',
            'haji_ali': 'Mosque and dargah on a sea-topped islet connected by a causeway; noted for its architecture.',
            'csmvs': 'Major museum showcasing Indian decorative arts, archaeology and history (formerly Prince of Wales Museum).',
            'bandra_worli_sea_link': 'Cable-stayed bridge connecting Bandra and Worli; an engineering landmark with city views.',
            'colaba_causeway': 'Bustling shopping street for souvenirs, clothes and small eateries in South Mumbai.',
            'dharavi': 'One of Asia\'s largest slums, known for small-scale industries, recycling and community tours.'
          }

          const inline = document.getElementById('attractionListInline')
          inline.innerHTML = ''
          js.spots.forEach(s => {
            const it = document.createElement('div')
            it.className = 'attraction-item'
            it.innerHTML = `<div style="font-weight:600">${s.name}</div><div class='text-muted small' style='margin-top:6px'>${summaries[s.id] || 'A local attraction worth visiting.'}</div>`
            inline.appendChild(it)
          })

          // search filter
          const search = document.getElementById('attractionSearch')
          if(search){
            search.oninput = function(){
              const q = this.value.trim().toLowerCase()
              Array.from(inline.children).forEach(ch => {
                const txt = ch.textContent.toLowerCase()
                ch.style.display = q && !txt.includes(q) ? 'none' : ''
              })
            }
          }

          // close button inside panel
          const closePanelBtn = document.getElementById('closeAttractionPanel')
          if(closePanelBtn){
            closePanelBtn.onclick = function(){
              const panel = document.getElementById('attractionPanel')
              panel.style.display = 'none'
            }
          }

          // populate Places dropdown (names only) in right column
          const placesMenu = document.getElementById('placesDropdownMenu')
          if(placesMenu){
            placesMenu.innerHTML = ''
            js.spots.forEach(s => {
              const li = document.createElement('li')
              const a = document.createElement('a')
              a.className = 'dropdown-item'
              a.href = '#'
              a.textContent = s.name
              a.onclick = (ev) => {
                ev.preventDefault()
                // open inline panel and filter to the clicked attraction
                const panel = document.getElementById('attractionPanel')
                panel.style.display = 'block'
                panel.style.maxHeight = '60vh'
                panel.style.overflow = 'auto'
                document.getElementById('attractionSearch').value = s.name
                Array.from(document.getElementById('attractionListInline').children).forEach(ch => {
                  const txt = ch.textContent.toLowerCase()
                  ch.style.display = txt.includes(s.name.toLowerCase()) ? '' : 'none'
                  if(txt.includes(s.name.toLowerCase())) ch.scrollIntoView({behavior:'smooth', block:'center'})
                })
                try{ const dd = bootstrap.Dropdown.getOrCreateInstance(document.getElementById('placesDropdownBtn')); dd.hide(); }catch(e){}
              }
              li.appendChild(a)
              placesMenu.appendChild(li)
            })
          }

          // populate nearby list (top 5 attractions with a sample eatery)
          nearbyList.innerHTML = ''
          js.spots.slice(0,5).forEach(s=>{
            const sampleEat = (eateriesMap[s.id] && eateriesMap[s.id][0]) ? ` — ${eateriesMap[s.id][0]}` : ''
            const row = document.createElement('div')
            row.innerHTML = `<div style="padding:8px 0;border-bottom:1px solid #f0f0f0"><strong>${s.name}</strong><div class='text-muted small'>${sampleEat}</div></div>`
            nearbyList.appendChild(row)
          })
        }).catch(e=>{
          // fallback content
          destAttractions.innerHTML = '<div class="text-muted">No attractions file found.</div>'
          nearbyList.innerHTML = ''
        })

        // foods and rules could be loaded similarly; here we keep static defaults
        document.getElementById('destFoods').innerHTML = '<span class="pill">Local specialties</span>'
        document.getElementById('destRules').innerHTML = '<li>Follow local guidelines and site rules.</li><li>Avoid littering and respect cultural sites.</li>'
      }

      // preselect Mumbai
      selectDestination('mumbai')
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
